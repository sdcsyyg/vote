jQuery.extend({handleError:function(a,b,c,d){a.error&&a.error.call(a.context||a,b,c,d),a.global&&(a.context?jQuery(a.context):jQuery.event).trigger("ajaxError",[b,a,d])},createUploadIframe:function(a,b){var d,c="jUploadFrame"+a;return window.ActiveXObject?"9.0"==jQuery.browser.version?(d=document.createElement("iframe"),d.id=c,d.name=c):("6.0"==jQuery.browser.version||"7.0"==jQuery.browser.version||"8.0"==jQuery.browser.version)&&(d=document.createElement('<iframe id="'+c+'" name="'+c+'" />'),"boolean"==typeof b?d.src="javascript:false":"string"==typeof b&&(d.src=b)):(d=document.createElement("iframe"),d.id=c,d.name=c),d.style.position="absolute",d.style.top="-1000px",d.style.left="-1000px",document.body.appendChild(d),d},ajaxUpload:function(s,xml){var uid=(new Date).getTime(),idIO="jUploadFrame"+uid,_this=this,jIO=$('<iframe name="'+idIO+'" id="'+idIO+'" style="display:none">').appendTo("body"),jForm=$('<form action="'+s.url+'" target="'+idIO+'" method="post" enctype="multipart/form-data"></form>').appendTo("body"),oldElement=$("#"+s.fileElementId),newElement=$(oldElement).clone();return $(oldElement).attr("id","jUploadFile"+uid),$(oldElement).before(newElement),$(oldElement).appendTo(jForm),this.remove=function(){null!==_this&&(jNewFile.before(jOldFile).remove(),jIO.remove(),jForm.remove(),_this=null)},this.onLoad=function(){var data=$(jIO[0].contentWindow.document.body).text();try{if(void 0!=data){data=eval("("+data+")");try{s.success&&s.success(data,status),s.global&&jQuery.event.trigger("ajaxSuccess",[xml,s]),s.complete&&s.complete(data,status),xml=null}catch(e){status="error",jQuery.handleError(s,xml,status,e)}s.global&&jQuery.event.trigger("ajaxComplete",[xml,s]),s.global&&!--jQuery.active&&jQuery.event.trigger("ajaxStop")}}catch(ex){alert(ex.message)}},this.start=function(){jForm.submit(),jIO.load(_this.onLoad)},this},createUploadForm:function(a,b,c,d){var h,i,j,e="jUploadForm"+a,f="jUploadFile"+a,g=jQuery('<form  action="'+b+'" method="POST" name="'+e+'" id="'+e+'" enctype="multipart/form-data"></form>');if(d)for(h in d)jQuery('<input type="hidden" name="'+h+'" value="'+d[h]+'" />').appendTo(g);return i=jQuery("#"+c),j=jQuery(i).clone(),jQuery(i).attr("id",f),jQuery(i).before(j),jQuery(i).appendTo(g),jQuery(g).css("position","absolute"),jQuery(g).css("top","-1200px"),jQuery(g).css("left","-1200px"),jQuery(g).appendTo("body"),g},ajaxFileUpload:function(a){var c,d,e,g,h,i,j,b={};if(a=jQuery.extend({},jQuery.ajaxSettings,a),!window.ActiveXObject){d=(new Date).getTime(),e=jQuery.createUploadForm(d,a.url,a.fileElementId,"undefined"==typeof a.data?!1:a.data),jQuery.createUploadIframe(d,a.secureuri),g="jUploadFrame"+d,h="jUploadForm"+d,a.global&&!jQuery.active++&&jQuery.event.trigger("ajaxStart"),i=!1,a.global&&jQuery.event.trigger("ajaxSend",[b,a]),j=function(c){var h,j,d=document.getElementById(g);try{d.contentWindow?(b.responseText=d.contentWindow.document.body?d.contentWindow.document.body.innerHTML:null,b.responseXML=d.contentWindow.document.XMLDocument?d.contentWindow.document.XMLDocument:d.contentWindow.document):d.contentDocument&&(b.responseText=d.contentDocument.document.body?d.contentDocument.document.body.innerHTML:null,b.responseXML=d.contentDocument.document.XMLDocument?d.contentDocument.document.XMLDocument:d.contentDocument.document)}catch(f){jQuery.handleError(a,b,null,f)}if(b||"timeout"==c){i=!0;try{h="timeout"!=c?"success":"error","error"!=h?(j=jQuery.uploadHttpData(b,a.dataType),a.success&&a.success(j,h),a.global&&jQuery.event.trigger("ajaxSuccess",[b,a]),a.complete&&a.complete(j,h)):jQuery.handleError(a,b,h)}catch(f){h="error",jQuery.handleError(a,b,h,f)}a.global&&jQuery.event.trigger("ajaxComplete",[b,a]),a.global&&!--jQuery.active&&jQuery.event.trigger("ajaxStop"),jQuery(d).unbind(),setTimeout(function(){try{jQuery(d).remove(),jQuery(e).remove()}catch(c){jQuery.handleError(a,b,null,c)}},100),b=null}},a.timeout>0&&setTimeout(function(){i||j("timeout")},a.timeout);try{e=jQuery("#"+h),jQuery(e).attr("action",a.url),jQuery(e).attr("method","POST"),jQuery(e).attr("target",g),e.encoding?jQuery(e).attr("encoding","multipart/form-data"):jQuery(e).attr("enctype","multipart/form-data"),jQuery(e).submit()}catch(k){jQuery.handleError(a,b,null,k)}return jQuery("#"+g).load(j),{abort:function(){}}}c=new jQuery.ajaxUpload(a,b),c.start()},uploadHttpData:function(r,type){var data=!type;return data="xml"==type||data?r.responseXML:r.responseText,"script"==type&&jQuery.globalEval(data),"json"==type&&eval("data = "+$(data).html()),"html"==type&&jQuery("<div>").html(data).evalScripts(),data}});