// LQY V 1.0.2

!function(a,b){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;Function.prototype.extend=function(a,b){var c,d;if(this.a=a.prototype,this.a.constructor=a.constructor,c=function(){},c.prototype=a.prototype,b)for(d in b)c.prototype[d]=b[d];return this.prototype=new c,this.prototype.constructor=this,this},Function.prototype.before=function(a){var b=this;return function(){return a.apply(this,arguments)===!1?!1:b.apply(this,arguments)}},Function.prototype.after=function(a){var b=this;return function(){var c=b.apply(this,arguments);return c===!1?!1:(a.apply(this,arguments),c)}},d={},e={},f={},g={autoLoad:!0,timeout:6e3,coreLib:["http://static.loupan.com/public/assets/js/jquery.min.js","http://static.loupan.com/public/assets/js/adsa.js?v=20160902"],model:{}},h=new function(){var a=b.getElementsByTagName("script");return a[a.length-1]},i=[],j=[],k=!1,l=function(a){return a.constructor===Array},m=function(a){var c,b=g.model;return c="string"==typeof a?b[a]?b[a]:{path:a}:a},n=function(c,e,i,j){var k,l,m,o,p=function(){d[c]=1,j&&j(c),j=null,a.clearTimeout(k)};if(c){if(d[c])return f[c]=!1,j&&j(c),void 0;if(f[c])return setTimeout(function(){n(c,e,i,j)},10),void 0;f[c]=!0,k=a.setTimeout(function(){if(g.timeoutCallback)try{g.timeoutCallback(c)}catch(a){}},g.timeout),m=e||c.toLowerCase().split(/\./).pop().replace(/[\?#].*/,""),"js"===m?(l=b.createElement("script"),l.setAttribute("type","text/javascript"),l.setAttribute("src",c),l.setAttribute("async",!0)):"css"===m&&(l=b.createElement("link"),l.setAttribute("type","text/css"),l.setAttribute("rel","stylesheet"),l.setAttribute("href",c)),i&&(l.charset=i),"css"===m?(o=new Image,o.onerror=function(){p(),o.onerror=null,o=null},o.src=c):(l.onerror=function(){p(),l.onerror=null},l.onload=l.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(p(),l.onload=l.onreadystatechange=null)}),h.parentNode.insertBefore(l,h)}},o=function(a,b){function k(){--j||(e[d]=1,b())}var d,f,h,j,i=(g.model,0);if(d=a.join(""),j=a.length,e[d])return b(),void 0;for(;f=a[i++];)h=m(f),h.requires?o(h.requires,function(a){return function(){n(a.path,a.type,a.charset,k)}}(h)):n(h.path,h.type,h.charset,k)},p=function(b){var c=!1,d=!0,e=a.document,f=e.documentElement,g=e.addEventListener?"addEventListener":"attachEvent",h=e.addEventListener?"removeEventListener":"detachEvent",i=e.addEventListener?"":"on",j=function(d){("readystatechange"!=d.type||"complete"==e.readyState)&&(("load"==d.type?a:e)[h](i+d.type,j,!1),!c&&(c=!0)&&b.call(a,d.type||d))},k=function(){try{f.doScroll("left")}catch(a){return setTimeout(k,50),void 0}j("poll")};if("complete"==e.readyState)b.call(a,"lazy");else{if(e.createEventObject&&f.doScroll){try{d=!a.frameElement}catch(l){}d&&k()}e[g](i+"DOMContentLoaded",j,!1),e[g](i+"readystatechange",j,!1),a[g](i+"load",j,!1)}},q=function(){var b,a=0;if(j.length)for(;b=j[a++];)r.apply(this,b)},r=function(){var b,c,a=[].slice.call(arguments);return g.autoLoad&&!e[g.coreLib.join("")]?(o(g.coreLib,function(){r.apply(null,a)}),void 0):i.length>0&&!e[i.join("")]?(o(i,function(){r.apply(null,a)}),void 0):("function"==typeof a[a.length-1]&&(b=a.pop()),c=a.join(""),(0===a.length||e[c])&&b?(b(),void 0):(o(a,function(){e[c]=1,b&&b()}),void 0))},r.add=function(a,b){a&&b&&b.path&&(g.model[a]=b)},r.delay=function(){var b=[].slice.call(arguments),c=b.shift();a.setTimeout(function(){r.apply(this,b)},c)},r.global=function(){var a=l(arguments[0])?arguments[0]:[].slice.call(arguments);i=i.concat(a)},r.css=function(a){var c=b.getElementById("do-inline-css");c||(c=b.createElement("style"),c.type="text/css",c.id="do-inline-css",h.parentNode.insertBefore(c,h)),c.styleSheet?c.styleSheet.cssText=c.styleSheet.cssText+a:c.appendChild(b.createTextNode(a))},r.SET=function(a,b){return g[a]=b,r},r.GET=function(a){return g[a]},p(function(){k=!0,q()}),function(a){var b=a.getAttribute("auto");b&&(g.autoLoad="true"===b.toLowerCase()?!0:!1),b=a.getAttribute("core"),b&&(g.coreLib=b.split(","))}(h||{}),a.$$=r,function(a){var b=1,c=function(){this.map={},this.rmap={}},d=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;c>b;++b)if(this[b]===a)return b;return-1},e=function(a,b){setTimeout(function(){a.call(b)},0)};c.prototype={waitFor:function(a,c,d){var g,h,i,j,k,e=this.map,f=this.rmap;for("string"==typeof a&&(a=[a]),g=(b++).toString(16),e[g]={waiting:a.slice(0),callback:c,thisObj:d},h=0,i=a.length;i>h;++h)j=a[h],k=f[j]||(f[j]=[]),k.push(g);return this},trigger:function(a){var c,d,e,f;if(!a)return this;for(this.map,c=this.rmap,"string"==typeof a&&(a=[a]),d=0,e=a.length;e>d;++d)f=a[d],"undefined"!=typeof c[f]&&(this._release(f,c[f]),delete c[f]);return this},_release:function(a,b){var g,h,i,j,k,l,c=this.map;for(this.rmap,g=0,h=b.length;h>g;++g)i=b[g],j=c[i],k=j.waiting,l=d.call(k,a),k.splice(l,1),0===k.length&&(e(j.callback,j.thisObj),delete c[i])}},a.yzm=c}(a)}(window,document);